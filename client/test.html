<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-route.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<body ng-app="myApp">

    <!-- <nav class="navbar navbar-light" > -->
    <!-- Navbar content -->


    <!-- <a href="#!index">Index</a>
        <a href="#!user">Users list</a>
        <a href="#!usersForm">New user</a>
        <a href="#!usersView">View new user</a>
        <a href="#!editUser">Edit user</a>

    </nav> -->

    

    <script>
        var app = angular.module("myApp", ["ngRoute"]);

        app.config(function ($routeProvider) {
            $routeProvider
                .when("/index", {
                    templateUrl: "index.html",
                    controller: "IndexList"
                })
                .when("/user", {
                    templateUrl: "user.html",
                    controller: "User"
                })
                .when("/usersForm", {
                    templateUrl: "usersForm.html",
                    controller: "formCtrl"
                })
                .when("/usersView", {
                    templateUrl: "usersView.html",
                    controller: "formCtrl2"
                })
                .when("/editUser", {
                    templateUrl: "editUser.html",
                    controller: "formCtrl3"
                });
        });


        app.controller('showhidectrl', function ($scope) {
            $scope.hideval = false;
            $scope.isShowHide = function (param) {
                if (param == "show") {
                    $scope.showval = true;
                    $scope.hideval = false;
                }
                else if (param == "hide") {
                    $scope.hideval = true;
                    $scope.showval = false;
                }
                else {
                    $scope.showval = true;
                    $scope.hideval = false;
                }
            }
        });


        // var app = angular.module('myApp', []);
        app.controller('formCtrl', function ($scope, $http, $location) {
            $scope.initials = '';
            $scope.eyeColor = '';
            $scope.age = '';
            $scope.guid = '';
            $scope.email = '';


            $scope.users = [];
            $scope.name = '';
            $scope.initials = '';
            $scope.eyeColor = '';
            $scope.age = '';
            $scope.guid = '';
            $scope.email = '';
            $scope.myTxt = "Watiing for new user...";
            $scope.submit = function () {
                if ($scope.name) {
                    $scope.myTxt = "New user in database!";
                    $scope.users.push(this.name);
                    $scope.users.push(this.initials);
                    $scope.users.push(this.eyeColor);
                    $scope.users.push(this.age);
                    $scope.users.push(this.guid);
                    $scope.users.push(this.email);

                    // $window.location.href = 'https:wwww.google.com';

                    $location.path('/usersView');

                    var data = {
                        name: this.name,
                        initials: this.initials,
                        eyeColor: this.eyeColor,
                        age: this.age,
                        guid: this.guid,
                        email: this.email
                    }
                    console.log(JSON.stringify(data))

                    // $http.get('/users/new/post', $scope.formData)

                    $scope.formData = {};
                    $scope.todoData = this.data;
                    console.log(data);


                    // Simple GET request example:
                    // $http({
                    //     method: 'GET',
                    //     url: 'http://localhost:3000/users/' + this.age + '/books/' + this.age,
                    // }).then(function successCallback(response) {
                    //     console.log("It's ok")
                    //     console.log(response)


                    // }, function errorCallback(response) {
                    //     console.log("It's not ok")

                    // });

                    $http({
                        method: 'GET',
                        url: 'http://localhost:3000/name/' + this.name + '/initials/' + this.initials + '/eyeColor/' + this.eyeColor + '/age/' + this.age + '/guid/' + this.guid + '/email/' + this.email,
                    }).then(function successCallback(response) {
                        console.log("It's ok")
                        console.log(response)


                    }, function errorCallback(response) {
                        console.log("It's not ok")

                    });



                    // $http({
                    //     method: 'GET',
                    //     url: 'http://localhost:3000/users/name/' + this.name + '/initials/' + this.initials + '/eyecolor/' + this.eyeColor + '/age/' + this.age + '/guid/' + this.guid + '/email/' + this.email,
                    // }).then(function successCallback(response) {
                    //     console.log("It's ok")
                    //     console.log(response)

                    // }, function errorCallback(response) {
                    //     console.log("It's not ok")

                    // });

                    //     $http({
                    //         method: 'GET',
                    //         url: 'http://localhost:3000/usersView?name=' + this.name + '&initials=' + this.initials + '&eyeColor=' + this.eyeColor + '&age=' + this.age + '&guid=' + this.guid + '&email=' + this.email,
                    //         // headers: {
                    //         //     'Content-Type': 'application/json'
                    //         // },
                    //    //usersView?name=&initials=&eyeColor=&age=&guid=&email=
                    //     }).then(function successCallback(response) {
                    //         // response= this.name;
                    //         console.log("It's ok")
                    //         console.log(response)

                    //     }, function errorCallback(response) {
                    //         console.log("It's not ok")

                    //     });



                    //calling nodeJS POST API +

                    $http({
                        method: 'POST',
                        url: 'http://localhost:3000/users/new/post',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        data
                    }).then(function successCallback(response) {
                        console.log("It's ok")
                        // this callback will be called asynchronously
                        // when the response is available
                    }, function errorCallback(response) {
                        console.log("It's not ok")
                        // called asynchronously if an error occurs
                        // or server returns response with an error status.
                    });


                    $scope.name = '';
                    $scope.initials = '';
                    $scope.eyeColor = '';
                    $scope.age = '';
                    $scope.guid = '';
                    $scope.email = '';



                }
            };




            $scope.myStyle = {
                "margin-left": "30px"
            };
            $scope.myStyle2 = {
                "margin-left": "25px"
            };

            $scope.myStyle3 = {
                "margin-left": "45px"
            };

            $scope.myStyle4 = {
                "margin-left": "10px"
            };

            $scope.myStyle5 = {
                "margin-left": "40px"
            };

            $scope.Submit = {
                "margin-left": "80px"
            };

        });

        app.controller('formCtrl2', function ($scope, $http) {



            $http({
                method: 'GET',
                url: 'http://localhost:3000/usersView'
            }).then(function successCallback(response) {
                console.log("It's ok")
                console.log(response)

                var data = response.data;

                console.log(data)

                console.log(data[0].name)

                $scope.name = data[0].name
                $scope.initials = data[0].initials
                $scope.eyeColor = data[0].eyeColor
                $scope.age = data[0].age
                $scope.guid = data[0].guid
                $scope.email = data[0].email

                //$scope.user = this.name;

                //  $scope.age = response.age


            }, function errorCallback(response) {
                console.log("It's not ok")

            });


            // $http.get('/json/user.json').then(function (response) {
            //     $scope.user = response.data.table;
            //     $scope.name = $scope.user[0].name;
            //     $scope.initials = $scope.user[0].initials;
            //     $scope.eyeColor = $scope.user[0].eyeColor;
            //     $scope.age = $scope.user[0].age;
            //     $scope.guid = $scope.user[0].guid;
            //     $scope.email = $scope.user[0].email;
            //     //    $scope.initFirst();

            // })

            //   $http.get('http://localhost:3000/usersView').then(function (response) {
            //      console("Ide")

            // $scope.name = "Rosana"

            // $scope.data = dataService.dataObj;


            //   })



            $scope.myStyle = {
                "margin-left": "30px"
            };
            $scope.myStyle2 = {
                "margin-left": "25px"
            };

            $scope.myStyle3 = {
                "margin-left": "45px"
            };

            $scope.myStyle4 = {
                "margin-left": "10px"
            };

            $scope.myStyle5 = {
                "margin-left": "40px"
            };

            $scope.Submit = {
                "margin-left": "80px"
            };

        });

        //  angular.module('Index', [])
        app.controller('IndexList', ['$scope', '$rootScope', function ($scope, $rootScope) {


            $rootScope.iphone2 = 'http://localhost:5000/iphone'
            $rootScope.kitchen2 = 'http://localhost:5000/kitchen'
            $rootScope.users2 = 'http://localhost:5000/users'
            $rootScope.test2 = 'http://localhost:5000/test'

            $rootScope.myStyle = {
                "padding": "50px",
                "color": "white",
                "background-color": "cornflowerblue",
                "font-size": "60px",
                "padding": "50px"
            }


            $rootScope.myBody = {
                "padding-left": "10px",
                "padding-right": "10px"
            }

        }])
            .controller('NamesController', ['$scope', function ($scope) {
                // $scope.names = ['Iphone', 'Kitchen', 'Users']
                $scope.iphone = ['Iphone']
                $scope.kitchen = ['Kitchen']
                $scope.users = ['Users']
                $scope.test = ['Test']
            }])

        app.controller('User', function ($scope, $http) {

            // var list = []


            $scope.listID = []



            $http({
                method: 'GET',
                url: 'http://localhost:3000/user'
            }).then(function successCallback(response) {
                console.log("It's ok")
                console.log(response)

                var data = response.data;

                // if ($scope.listID.length > 0) {
                //     $scope.listID = []

                // }



                for (var i = 0; i <= data.length; i++) {



                    $scope.listID.push(data[0][i].id + " " + data[0][i].name + " " + data[0][i].initials + " " + data[0][i].eyecolor + " " + data[0][i].age + " " + data[0][i].guid + " " + data[0][i].email)

                    $scope.id = data[0][i].id;
                    $scope.name = data[0][i].name;
                    $scope.initials = data[0][i].initials;
                    $scope.eyeColor = data[0][i].eyecolor;
                    $scope.age = data[0][i].age;
                    $scope.guid = data[0][i].guid;
                    $scope.email = data[0][i].email;


                    // console.log($scope.id)
                    // console.log($scope.listID)



                }

                console.log($scope.listName)




                $route.reload();

            }, function errorCallback(response) {
                console.log("It's not ok")

            });

            // console.log(list)

            $scope.myStyle = {
                "font-weight": "bold"
            }



        })

        app.controller('formCtrl3', function ($scope, $http) {

            $scope.edit = 'http://localhost:5000/editUserID'

            $scope.listID = []
            $scope.ubaciID = []

            $http({
                method: 'GET',
                url: 'http://localhost:3000/user'
            }).then(function successCallback(response) {
                console.log("It's ok")
               // console.log(response)

                var data = response.data;

                // if ($scope.listID.length > 0) {
                //     $scope.listID = []

                // }



                for (var i = 0; i <= data.length; i++) {



                    $scope.listID.push(data[0][i].id + " " + data[0][i].name)
                    $scope.ubaciID.push('http://localhost:3000/user/'+data[0][i].id)
                    $scope.id = data[0][i].id;
                    $scope.name = data[0][i].name;

                   console.log($scope.ubaciID)

                    // $scope.initials = data[0][i].initials;
                    // $scope.eyeColor = data[0][i].eyecolor;
                    // $scope.age = data[0][i].age;
                    // $scope.guid = data[0][i].guid;
                    // $scope.email = data[0][i].email;


                    // console.log($scope.id)
                    // console.log($scope.listID)



                }

               // console.log($scope.listName)
              //  console.log($scope.ubaciID)




              //  $route.reload();

            }, function errorCallback(response) {
                console.log("It's not ok")

            });

            

            // console.log(list)

            $scope.myStyle = {
                "font-weight": "bold"
            }



        });



    </script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>



    <div ng-controller="showhidectrl">

        <nav class="navbar navbar-expand-lg navbar-light bg-light" style="background-color: blue;">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01"
                aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
                <a class="navbar-brand" href="#!index" ng-click="isShowHide('hide')">Index</a>
                <a class="navbar-brand" href="#!test" ng-click="isShowHide('show')">Test</a>
                <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                    <li class="nav-item active">
                        <a class="nav-link" href="#!user" ng-click="isShowHide('hide')">Users list <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#!usersForm" ng-click="isShowHide('hide')">New user</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#!usersView" ng-click="isShowHide('hide')">View new user</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#!editUser" ng-click="isShowHide('hide')">Edit user</a>
                    </li>
                </ul>
                <form class="form-inline my-2 my-lg-0">
                    <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                </form>
            </div>
        </nav>
    
        <div ng-view>
        </div>
        <h1 ng-hide="hideval">Welcome!</h1>
        <p ng-hide="hideval"></p>
        <p ng-hide="hideval">This is Users Single Page Application.</p>
        <p ng-hide="hideval">Here you can write new users or review existing ones. </p>
        <p ng-hide="hideval">Delete or update users in the list.</p>
        <p ng-hide="hideval">There is also list with all the users.</p>
        <p ng-hide="hideval">Created by <b>Rosana</b></p>
        <!-- <a class="nav-link" href="#!usersForm" ng-click="isShowHide('hide')">New user</a> -->
        <!-- <div ng-hide="hideval">Hide Div: I will Appear on Hide Click</div> -->
        <!-- <p>Click on the links to navigate to "red.htm", "green.htm", "blue.htm", or back to "main.htm"</p> -->

    </div>
</body>

</html>